## **1. 뮤텍스(Mutex)와 세마포어(Semaphore)**

- **뮤텍스**
    - **Mutual Exclusion**의 줄임말.
    - 공유 자원에 **동시에 한 스레드만 접근**할 수 있도록 하는 **잠금(Lock)** 장치.
    - **소유권(Owership)** 개념이 있음 → Lock을 획득한 스레드만 해제 가능.
    - 주로 **임계 구역(Critical Section)** 보호에 사용.
    - 예: 화장실 키 하나 → 들어간 사람이 반드시 키를 들고 나와야 함.
- **세마포어**
    - 여러 개의 스레드가 공유 자원에 접근할 수 있도록 **카운터**를 두는 동기화 도구.
    - **카운팅 세마포어**: 허용 가능한 스레드 개수를 지정 (예: 3이면 동시에 3명까지 가능)
    - **이진 세마포어**: 값이 0 또는 1만 가능 → 뮤텍스처럼 동작하지만 소유권 없음.
    - 예: 주차장 출입구 → 빈 자리(카운터)가 줄면 대기.

---

## **2. 이진 세마포어 vs 뮤텍스**

- 둘 다 동시에 한 스레드만 접근 가능하게 한다는 점에서는 비슷.
- **차이점**
    1. **소유권**
        - 뮤텍스: Lock을 획득한 스레드만 해제 가능.
        - 이진 세마포어: 아무 스레드나 해제 가능.
    2. **용도**
        - 뮤텍스: 주로 한 프로세스 내부 또는 프로세스 간 임계 구역 보호.
        - 이진 세마포어: 시그널링(작업 완료 통지) 등에도 사용 가능.
- **결론**: 이진 세마포어는 더 범용적이지만, 그만큼 잘못 쓰면 의도치 않게 해제될 위험도 있음.

---

## **3. Spin Lock**

- **정의**: Lock을 얻을 때까지 CPU를 계속 돌면서(busy-wait) 재시도하는 방법.
- **장점**
    - Lock이 **매우 짧은 시간** 점유될 경우, Context Switching 없이 바로 획득 가능 → 빠름.
    - 커널·멀티코어 환경에서 효율적.
- **단점**
    - Lock이 오래 점유되면 CPU를 낭비 (다른 작업 못 함).
    - 단일 코어에서 Lock 점유자가 실행 중이 아니면 영원히 기다릴 수 있음.
- **개선책**
    - **Hybrid Lock**: 일정 시간 spin 후 못 얻으면 sleep.
    - **Adaptive Spin Lock**: Lock 소유자가 실행 중인지 보고 spin 여부 결정.

---

## **4. 시스템 콜 기반 Lock의 장단점**

- **뮤텍스·세마포어**는 커널이 관리 → Lock 획득·해제 시 **시스템 콜** 필요.
- **장점**
    - 커널이 관리하므로 안정성·정확성 보장.
    - 프로세스 간 동기화 가능.
- **단점**
    - 유저 모드 ↔ 커널 모드 전환 비용 발생.
    - Lock 경쟁 심하면 Context Switching 오버헤드 큼.
- **해결 방법**
    - **Futex(Fast Userspace Mutex)**: 경합 없을 땐 유저 모드에서 처리, 경합 시만 커널 진입.
    - Spin Lock과 Sleep 혼합으로 모드 전환 최소화.

---

📌 **정리**

- **뮤텍스**: 소유권 있는 1명 전용 키.
- **세마포어**: 허용 인원 수 있는 입장권.
- **이진 세마포어**: 키처럼 쓰지만 아무나 반납 가능.
- **Spin Lock**: 문 앞에서 계속 두드림(짧게는 효율, 길게는 낭비).
- **시스템 콜 Lock**: 안전하지만 전환 비용 큼 → futex 같은 혼합형이 해결책.

# 면접 대답

## **1. 뮤텍스와 세마포어 차이**

> "뮤텍스는 소유권이 있는 Lock으로 한 번에 한 스레드만 접근 가능하고, 획득한 스레드만 해제할 수 있습니다.
세마포어는 허용 가능한 접근 개수를 카운터로 관리하고, 해제는 소유권 없이 가능합니다."
> 

---

## **2. 이진 세마포어 vs 뮤텍스**

> "이진 세마포어는 0과 1 값만 가능해 동작은 뮤텍스와 유사하지만, 소유권이 없습니다.
즉, Lock을 획득한 스레드가 아니어도 해제할 수 있습니다.
뮤텍스는 반드시 획득한 스레드만 해제 가능합니다."
> 

---

## **3. Spin Lock 장단점**

> "Spin Lock은 Lock을 얻을 때까지 CPU를 계속 점유해 빠른 획득이 가능하지만,
Lock이 오래 점유되면 CPU 낭비가 심합니다.
개선책으로 Hybrid Lock이나 Adaptive Spin Lock을 사용해 효율성을 높일 수 있습니다."
> 

---

## **4. 시스템 콜 기반 Lock 장단점**

> "커널이 관리하므로 안정성과 프로세스 간 동기화가 보장되지만,
유저-커널 모드 전환 오버헤드가 발생합니다.
이를 줄이기 위해 Futex를 사용하면 경합이 없을 때는 유저 모드에서 처리하고,
경합 시에만 커널로 진입해 성능을 개선할 수 있습니다."
>
