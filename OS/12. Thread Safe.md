## **1. Thread Safe의 의미**

- **정의**: 여러 스레드가 동시에 같은 자원에 접근하더라도 프로그램의 동작이 의도한 대로 보장되는 것.
- 즉, 동시 실행 환경에서도 **데이터의 무결성·일관성**이 유지되는 상태.

---

## **2. Thread Safe를 보장하는 방법**

- **락(Lock)** 기반 동기화
    - 뮤텍스(Mutex), 세마포어(Semaphore), 모니터(Monitor)
    - 동시에 한 스레드만 접근 가능하게 함.
- **원자적 연산(Atomic Operation)**
    - CPU가 중간에 끼어들 수 없는 단일 연산.
- **불변 객체(Immutable Object)**
    - 상태 변경이 없으므로 동기화 불필요.
- **스레드 로컬 저장소(Thread-Local Storage)**
    - 각 스레드마다 독립적인 데이터 복사본을 제공.
- **Lock-Free / Wait-Free 알고리즘**
    - CAS(Compare-And-Swap) 등으로 경쟁 없이 동시성 보장.

---

## **3. Peterson's Algorithm**

- **정의**: 두 개의 프로세스가 상호 배제를 보장하기 위해 사용하는 고전적인 소프트웨어 기반 알고리즘.
- **원리**
    1. `flag[]`: 각 프로세스의 진입 의사 표시.
    2. `turn`: 누가 먼저 들어갈지 지정.
    3. 진입하려는 프로세스는 flag 설정 → turn 상대방으로 설정 → 상대방 flag와 turn 확인 후 진입.
- **한계**
    - 오직 **두 프로세스**만 가능.
    - 현대 CPU의 **메모리 재정렬(Memory Reordering)**이나 캐시 일관성 문제로 하드웨어 지원 없이 보장 어려움.
    - 다중 코어 환경에서 비효율적.

---

## **4. Race Condition**

- **정의**: 둘 이상의 스레드가 공유 자원에 동시에 접근·변경하려 할 때, 실행 순서에 따라 결과가 달라지는 상황.
- **결과**: 데이터 불일치, 예측 불가능한 버그.

---

## **5. Thread Safe 구현 시 락이 필수인가?**

- **아님.**
- 락 외에도 다음 방법으로 가능:
    - **원자적 연산** (CPU의 Atomic Instruction)
    - **불변 객체** (상태 변경 자체 제거)
    - **함수형 프로그래밍** (Stateless 구조)
    - **Lock-Free / Wait-Free 알고리즘**
    - **메시지 패싱(Message Passing)** 구조 (Actor Model 등)

---

📌**정리**

- Thread Safe = 멀티스레드 환경에서 안전.
- 방법 = 락, 원자 연산, 불변성, 스레드 로컬, Lock-Free 등.
- Peterson’s = 2프로세스 전용 SW 기반 상호 배제, 현대 HW 환경에선 실용성 떨어짐.
- Race Condition = 실행 순서 의존 → 예측 불가 결과.
- 락이 없어도 Thread Safe 가능 → 원자 연산·불변 객체·메시지 패싱 등 사용.

# 면접 대답

## **1. Thread Safe란?**

> "여러 스레드가 동시에 같은 자원에 접근해도 데이터의 일관성과 무결성이 유지되는 상태를 말합니다."
> 

---

## **2. Thread Safe 보장 방법**

> "뮤텍스, 세마포어 같은 락을 쓰거나, 원자적 연산, 불변 객체, 스레드 로컬 저장소, Lock-Free 알고리즘 등을 사용할 수 있습니다."
> 

---

## **3. Peterson's Algorithm과 한계**

> "두 프로세스 간 상호 배제를 보장하는 소프트웨어 알고리즘으로, flag와 turn 변수를 사용합니다.
하지만 두 프로세스만 가능하고, 현대 CPU의 메모리 재정렬과 캐시 일관성 문제로 실무에서 잘 쓰이지 않습니다."
> 

---

## **4. Race Condition이란?**

> "여러 스레드가 공유 자원에 동시에 접근해 실행 순서에 따라 결과가 달라지는 상황입니다."
> 

---

## **5. 락 없이 Thread Safe 구현 가능 여부**

> "가능합니다. 원자적 연산, 불변 객체, 함수형 구조, Lock-Free 알고리즘, 메시지 패싱 등을 활용할 수 있습니다."
>
