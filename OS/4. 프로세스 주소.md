## 1. 프로세스 주소공간이란?

> 프로세스 주소공간은 프로세스가 실행 중에 사용하는 가상의 메모리 공간으로,
> 
> 
> 운영체제가 각 프로세스마다 **고립된 메모리 환경을 제공하기 위해 만들어진 구조**입니다.
> 
> 보통 다음과 같이 **4~5개의 영역**으로 나뉘어요:
> 

```

[ 높은 주소 ]
--------------------
|      Stack       | ← 지역변수, 함수 호출 시 생성되는 임시 공간 (아래로 성장)
--------------------
|       Heap       | ← 동적 할당 공간 (위로 성장)
--------------------
|     BSS (.bss)   | ← 초기화되지 않은 전역/정적 변수
--------------------
|   Data (.data)   | ← 초기화된 전역/정적 변수
--------------------
|     Text (.text) | ← 실행 코드 영역 (읽기 전용)
--------------------
[ 낮은 주소 ]

```

## 2. 초기화하지 않은 변수들은 어디에 저장되나요?

> 초기화하지 않은 전역 변수 또는 정적 변수는 BSS 영역(.bss) 에 저장됩니다.
> 
> 
> 운영체제는 이 영역을 0으로 자동 초기화합니다.
> 

```c

int global_var;   // → BSS에 저장됨
```

---

## 3. Stack과 Heap 크기는 큰가요? 언제 결정되나요?

> Stack과 Heap은 전체 메모리 중 일부만 동적으로 사용합니다.
> 
> 
> 처음엔 작게 시작하고, 필요에 따라 **동적 확장**됩니다.
> 
> 단, **최대 크기는 운영체제가 제한**합니다.
> 
- Stack은 보통 몇 MB 정도로 제한되며,
- Heap은 시스템 메모리 한도까지 확장될 수 있습니다.

이 크기는 실행 시 운영체제나 쉘 설정, 또는 개발자가 명시적으로 조절할 수 있습니다.

---

## 4. Stack vs Heap: 속도는 어디가 더 빠른가요?

> 일반적으로 Stack이 훨씬 빠릅니다.
> 
- Stack은 **연속된 메모리에서 push/pop 방식**으로 작동해
    
    오버헤드가 거의 없습니다.
    
- 반면 Heap은 **동적 할당/해제 시 오버헤드**가 크고,
    
    조각화(fragmentation) 문제도 있습니다.
    

그래서 성능이 중요한 함수 내 변수는 Stack에 두는 게 좋습니다.

---

## 5. 이렇게 나누는 이유가 있을까요?

> 주소 공간을 나누는 이유는 효율성과 안정성 때문입니다.
> 
- **텍스트 영역은 읽기 전용**으로 설정하여 바이너리 코드의 손상 방지
- **데이터/스택/힙은 읽기/쓰기 가능**으로, 기능에 맞는 접근 제어 가능
- Stack은 함수 호출 시 LIFO 구조를 그대로 반영
- Heap은 동적 메모리 할당 시 유연성 제공

서로 다른 성격의 데이터를 분리함으로써, **메모리 관리와 보호를 효과적으로 수행**할 수 있습니다.

---

## 6. 스레드의 주소공간은 어떻게 구성되나요?

> 스레드는 프로세스의 주소공간을 공유합니다.
> 
> 
> 즉, **텍스트, 데이터, 힙 영역은 모든 스레드가 함께 사용**합니다.
> 
> 하지만 각 스레드는 **자기만의 Stack 영역**을 가지고 있어요.
> 
> 이 Stack을 기반으로 함수 호출, 지역 변수 저장 등을 개별적으로 처리합니다.
> 

---

## 7. 스택/힙 이름은 자료구조랑 관련 있나요?

> 네, 관련이 있습니다.
> 
- **Stack 영역**은 실제로 **함수 호출 시 push/pop이 발생**하는 구조이기 때문에
    
    자료구조인 스택(LIFO) 구조를 따릅니다.
    
- **Heap 영역**은 **데이터를 동적으로 할당/해제**하는데 사용되며,
    
    과거에는 실제 Heap 자료구조로 관리되기도 했지만,
    
    요즘은 **여러 종류의 할당자 알고리즘**(예: buddy, slab, malloc 등)을 사용합니다.
    

즉, **스택은 구조와 동작 모두 자료구조 스택과 유사**,

**힙은 이름만 자료구조 힙에서 왔고, 구현은 좀 더 다양**하다고 볼 수 있습니다.

---

## 8. IPC의 Shared Memory는 프로세스 주소공간 어디에 들어가나요?

> 공유 메모리는 Heap이나 mmap으로 매핑된 영역에 포함됩니다.
> 
> 
> 공유 메모리는 OS가 **같은 물리 메모리 페이지를 다른 프로세스의 주소공간에 매핑**해서 구현합니다.
> 
> 즉, **서로 다른 프로세스가 하나의 메모리 영역을 공유할 수 있게** 해주는 방식입니다.
> 

→ 빠른 통신이 가능하지만, 동기화(세마포어 등)는 개발자가 직접 처리해야 합니다.

---

## 9. Stack과 Heap의 크기는 언제 결정되나요? 사용자가 수정할 수 있나요?

> Stack과 Heap은 프로그램 실행 시(runtime) 할당되며,
> 
> 
> 기본 크기는 운영체제와 컴파일러 설정에 따라 다릅니다.
> 
- Stack은 `ulimit -s`로 확인하거나 수정 가능
- Heap은 프로그램에서 `malloc`, `brk`, `mmap` 등을 통해 확장 가능

 개발자가 컴파일 시 제한하거나,

사용자가 실행 환경에서 설정 값을 바꿔서 조절할 수 있습니다.

---

## 종합 답변

> 프로세스 주소공간은 텍스트, 데이터, BSS, 힙, 스택으로 구성되며,
> 
> 
> 각 영역은 메모리 보호와 효율적인 관리를 위해 분리되어 있습니다.
> 
> 초기화되지 않은 변수는 BSS에 저장되고, Stack은 지역변수/함수 호출용, Heap은 동적 메모리 영역입니다.
> 
> Stack은 속도가 빠르지만 용량은 제한적이며, Heap은 유연하지만 느립니다.
> 
> 스레드는 주소공간을 공유하지만 개별 Stack을 가집니다.
> 
> 공유 메모리는 일반적으로 mmap이나 Heap 영역에 매핑되며, Stack/Heap 크기는 실행 시점에 설정되고 사용자 설정도 가능합니다.
>
